# ============================================================================
# SGE API Environment Configuration
# ============================================================================
# 
# SETUP MODES:
# 
# 1) PAGES DEMO (GitHub Pages) - Static site with simulated workflows
#    - No backend required
#    - All data simulated in frontend
#    - Perfect for showcasing platform capabilities
# 
# 2) LOCAL MOCK MODE (Default) - Local dev without external services
#    - MOCK_MODE=true
#    - No Postgres/Redis required (uses in-memory implementations)
#    - No real RPC/wallets needed (uses mock providers)
#    - Perfect for frontend development & rapid iteration
# 
# 3) LOCAL REAL MODE - Full enterprise stack
#    - MOCK_MODE=false
#    - Requires: docker-compose up (Postgres + Redis)
#    - Requires: Real RPC endpoint
#    - Requires: Funded relayer wallet for gasless transactions
#    - Requires: Deployed contracts
#    - Optional: Coinbase Commerce for fiat payments
# 
# 4) PRODUCTION - Live mainnet deployment
#    - All REAL MODE requirements
#    - Plus: Cold storage wallets for deployer/treasury
#    - Plus: Monitoring & alerts
#    - Plus: 2-person payout approval
# 
# ============================================================================

# -----------------------------------------------------------------------------
# MODE CONFIGURATION
# -----------------------------------------------------------------------------
NODE_ENV=development                    # development | production
MOCK_MODE=true                          # true = no DB/Redis/RPC needed

# -----------------------------------------------------------------------------
# API SERVER
# -----------------------------------------------------------------------------
PORT=3000
APP_ORIGIN=http://localhost:5173        # Frontend URL for CORS (Pages: https://unykornai.github.io)

# -----------------------------------------------------------------------------
# DATABASE - Required when MOCK_MODE=false
# -----------------------------------------------------------------------------
# Start with: npm run db:up
DATABASE_URL=postgresql://sge:sge@localhost:5432/sge

# -----------------------------------------------------------------------------
# REDIS - Required when MOCK_MODE=false  
# -----------------------------------------------------------------------------
# Start with: npm run db:up
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# ETHEREUM RPC - Required when MOCK_MODE=false
# -----------------------------------------------------------------------------
# Mainnet RPC endpoint (get from Alchemy, Infura, or QuickNode)
ETH_RPC_HTTPS=https://eth-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_KEY
# ETH_RPC_HTTPS=https://mainnet.infura.io/v3/YOUR_INFURA_KEY
# ETH_RPC_HTTPS=https://eth.llamarpc.com  # Public (rate limited)

# -----------------------------------------------------------------------------
# WALLET CONFIGURATION
# -----------------------------------------------------------------------------
# ⚠️  CRITICAL: Generate with `npm run wallet:new` - NEVER commit real keys!
# 
# These example keys are from Hardhat's test accounts - DO NOT use in production

# DEPLOYER - Deploys contracts (one-time use, cold storage recommended)
DEPLOYER_ADDRESS=0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
DEPLOYER_PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80

# RELAYER - Submits gasless transactions (hot wallet, keep funded with ~0.5 ETH)
RELAYER_ADDRESS=0x70997970C51812dc3A010C7d01b50e0d17dc79C8
RELAYER_PRIVATE_KEY=0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d

# TREASURY - Receives platform fees (cold storage recommended)
TREASURY_ADDRESS=0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC

# -----------------------------------------------------------------------------
# CONTRACT ADDRESSES
# -----------------------------------------------------------------------------
# Fill these in AFTER deploying contracts with: npm run deploy:contracts

SGEID_ADDRESS=                          # SGE-ID NFT contract
SGE_TOKEN=0x40489719E489782959486A04B765E1E93E5B221a   # SGE ERC-20 token (mainnet)
SGE_CLAIM=0x4BFeF695a5f85a65E1Aa6015439f317494477D09  # Claim vault (mainnet)
USDC=0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48        # USDC (mainnet)
USDT=0xdAC17F958D2ee523a2206206994597C13D831ec7        # USDT (mainnet)

# -----------------------------------------------------------------------------
# PRICING & FEES
# -----------------------------------------------------------------------------
FEE_USD=100                             # Settlement fee in USD cents ($1.00)
MINT_PRICE_USD=4999                     # SGE-ID mint price in cents ($49.99)

# -----------------------------------------------------------------------------
# COINBASE COMMERCE - Optional (for fiat payments)
# -----------------------------------------------------------------------------
# Get from: https://commerce.coinbase.com/dashboard/settings
COINBASE_COMMERCE_API_KEY=
COINBASE_COMMERCE_WEBHOOK_SHARED_SECRET=

# Webhook endpoint: https://your-domain.com/api/webhooks/coinbase
# Coinbase will POST payment events here for verification

# -----------------------------------------------------------------------------
# ADMIN & SECURITY
# -----------------------------------------------------------------------------
ADMIN_API_KEY=dev-admin-key-change-in-production

# Payout approval (2-person rule for production)
PAYOUT_APPROVER_1=
PAYOUT_APPROVER_2=

# -----------------------------------------------------------------------------
# AFFILIATE SYSTEM
# -----------------------------------------------------------------------------
# Commission rates in basis points (100 = 1%, 1000 = 10%)
DIRECT_COMMISSION_BPS=1000              # 10% for direct referrals
OVERRIDE_COMMISSION_BPS=300             # 3% for downline activity
MAX_AFFILIATE_DEPTH=10                  # Max levels in referral tree

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
KYC_REQUIRED=false                      # Require KYC for settlements
COMMERCE_REQUIRED=false                 # Require payment verification
ALLOW_SOFT_KYC=true                     # Allow email-only verification
ENABLE_ENTERPRISE_API=true              # Enable ledger/queue APIs
ENABLE_AFFILIATE_SYSTEM=true            # Enable affiliate registration
ENABLE_COMMISSION_ENGINE=true           # Enable commission calculations
ENABLE_PAYOUT_SYSTEM=true               # Enable payout batches

# -----------------------------------------------------------------------------
# OPERATIONAL THRESHOLDS
# -----------------------------------------------------------------------------
# Alert when intent stuck longer than this
INTENT_TIMEOUT_MINUTES=10

# Alert when ledger imbalance detected
LEDGER_CHECK_ENABLED=true

# Minimum payout amount (prevents dust payouts)
MIN_PAYOUT_AMOUNT=1000                  # $10.00 in cents

# -----------------------------------------------------------------------------
# MONITORING & ALERTS - Optional
# -----------------------------------------------------------------------------
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/XXX/YYY/ZZZ
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/XXX/YYY
# SENTRY_DSN=https://xxx@sentry.io/yyy

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=info                          # debug | info | warn | error
